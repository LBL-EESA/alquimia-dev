

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Batch Test problems &mdash; Alquimia 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Alquimia 0.1 documentation" href="index.html" />
    <link rel="prev" title="Alquimia C Utilities Library" href="api/APIv0_c_utils.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="api/APIv0_c_utils.html" title="Alquimia C Utilities Library"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Alquimia 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="batch-test-problems">
<h1>Batch Test problems<a class="headerlink" href="#batch-test-problems" title="Permalink to this headline">¶</a></h1>
<p>Since the batch chem drivers are not doing anything except calling the
engine&#8217;s reaction stepping many times and writing the results to a
file, the numerical results should be identical (to the precision of
the text file output) at every time step.</p>
<div class="section" id="automated-test-driver">
<h2>Automated test driver<a class="headerlink" href="#automated-test-driver" title="Permalink to this headline">¶</a></h2>
<p>The automated test driver compares the pflotran observation data for
the problem with a similarly structured alquimia batch_chem output
file. The number of columns in each file must be the same. Variable
names should be the same, but the order doesn&#8217;t matter. So for
example, if &#8220;Total H+ [M]&#8221;, &#8220;Total Sorbed A [mol/m^3]&#8221; or &#8220;Calcite
Rate [mol/sec]&#8221; is on one file, it must be in the other.</p>
<p>To run a all tests in a particular config file:</p>
<div class="highlight-bash"><div class="highlight"><pre>python ./batch-compare-alquimia-pflotran.py -c alquimia-pflotran-tests.cfg -p ./pflotran -a ../src/drivers/batch_chem
</pre></div>
</div>
<p>To run a single test by name:</p>
<div class="highlight-bash"><div class="highlight"><pre>python ./batch-compare-alquimia-pflotran.py -c alquimia-pflotran-tests.cfg -p ./pflotran -a ../src/drivers/batch_chem -t calcite-volume-fractions-pflotran-constraint
</pre></div>
</div>
</div>
<div class="section" id="calcite-kinetics-short-time-and-pflotran-native-constraints">
<h2>Calcite kinetics, short time, and pflotran native constraints<a class="headerlink" href="#calcite-kinetics-short-time-and-pflotran-native-constraints" title="Permalink to this headline">¶</a></h2>
<p>Test the alquimia interface with mineral dissolution/precipitation for
a short simulation time (no changes to calcite volume fraction). The
initial condition is specified by name only, causing alquimia look for
a pflotran native constraint with that name.</p>
<p><strong>Status: fail</strong></p>
<p>Status Notes: Looking at the time series, there are occasional differences in the sixth decimal.</p>
<div class="highlight-bash"><div class="highlight"><pre>../install/bin/batch_chem -d -i calcite-short-pc.cfg

./pflotran -input_prefix calcite-short
</pre></div>
</div>
<p>NOTE: this is the same pflotran input file as
calcite-short-dc!</p>
</div>
<div class="section" id="calcite-kinetics-short-time-and-driver-generated-constraints">
<h2>Calcite kinetics, short time, and driver generated constraints<a class="headerlink" href="#calcite-kinetics-short-time-and-driver-generated-constraints" title="Permalink to this headline">¶</a></h2>
<p>Test the alquimia interface with mineral dissolution/precipitation for
a short simulation time (no changes to calcite volume fraction). The
initial condition is fully specified by the driver and processed by
pflotran.</p>
<p><strong>Status: fail</strong></p>
<p>Status Notes: Looking at the time series, there are occasional differences in the sixth decimal.</p>
<div class="highlight-bash"><div class="highlight"><pre>../install/bin/batch_chem -d -i calcite-short-dc.cfg

./pflotran -input_prefix calcite-short
</pre></div>
</div>
<p>NOTE: this is the same pflotran input file as
calcite-short-pc!</p>
</div>
<div class="section" id="calcite-kinetics-w-volume-fraction-updates-and-pflotran-native-constraints">
<h2>Calcite kinetics w/ volume fraction updates and pflotran native constraints<a class="headerlink" href="#calcite-kinetics-w-volume-fraction-updates-and-pflotran-native-constraints" title="Permalink to this headline">¶</a></h2>
<p>Test the alquimia interface with mineral dissolution/precipitation for
a long simulation time, so that the mineral volume fractions are
updated during reaction stepping. Uses pflotran native constraints.</p>
<p><strong>Status: fails</strong></p>
<p>Status Notes: slight initial numerical differences in rates accumulate error?</p>
<div class="highlight-bash"><div class="highlight"><pre>../install/bin/batch_chem -d -i calcite-vf-pc.cfg

./pflotran -input_prefix calcite-vf
</pre></div>
</div>
</div>
<div class="section" id="isotherms-with-pflotran-native-constraints">
<h2>Isotherms with pflotran native constraints<a class="headerlink" href="#isotherms-with-pflotran-native-constraints" title="Permalink to this headline">¶</a></h2>
<p>Test the alquimia interface with equilibrium sorption isotherms, Kd,
langmuir, and freundlich. Because these are equilibrium isotherms, the
initial equilibrium solution obtained when processing the geochemical
constraint should not change during reaction stepping.</p>
<p><strong>Status: fails</strong></p>
<p>Status Notes: final significant figure is off for the &#8220;D&#8221; species.</p>
<div class="highlight-bash"><div class="highlight"><pre>../src/drivers/batch_chem -d -i isotherms-pc.cfg
./pflotran -input_prefix isotherms
</pre></div>
</div>
<p>NOTE: this is the same pflotran input file as isotherms-ac.</p>
</div>
<div class="section" id="isotherms-with-alquimia-supplied-constraints">
<h2>Isotherms with alquimia supplied constraints<a class="headerlink" href="#isotherms-with-alquimia-supplied-constraints" title="Permalink to this headline">¶</a></h2>
<p>Test the alquimia interface with equilibrium sorption isotherms, Kd,
langmuir, and freundlich. Because these are equilibrium isotherms, the
initial equilibrium solution obtained when processing the geochemical
constraint should not change during reaction stepping.</p>
<p><strong>Status: fails</strong></p>
<p>Status Notes: final significant figure is off for the &#8220;D&#8221; species.</p>
<div class="highlight-bash"><div class="highlight"><pre>../src/drivers/batch_chem -d -i isotherms-ac.cfg
./pflotran -input_prefix isotherms
</pre></div>
</div>
<p>NOTE: this is the same pflotran input file as isotherms-pc.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Batch Test problems</a><ul>
<li><a class="reference internal" href="#automated-test-driver">Automated test driver</a></li>
<li><a class="reference internal" href="#calcite-kinetics-short-time-and-pflotran-native-constraints">Calcite kinetics, short time, and pflotran native constraints</a></li>
<li><a class="reference internal" href="#calcite-kinetics-short-time-and-driver-generated-constraints">Calcite kinetics, short time, and driver generated constraints</a></li>
<li><a class="reference internal" href="#calcite-kinetics-w-volume-fraction-updates-and-pflotran-native-constraints">Calcite kinetics w/ volume fraction updates and pflotran native constraints</a></li>
<li><a class="reference internal" href="#isotherms-with-pflotran-native-constraints">Isotherms with pflotran native constraints</a></li>
<li><a class="reference internal" href="#isotherms-with-alquimia-supplied-constraints">Isotherms with alquimia supplied constraints</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api/APIv0_c_utils.html"
                        title="previous chapter">Alquimia C Utilities Library</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/batch-tests.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="api/APIv0_c_utils.html" title="Alquimia C Utilities Library"
             >previous</a> |</li>
        <li><a href="index.html">Alquimia 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Lawrence Berkeley National Lab, Ben Andre.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>